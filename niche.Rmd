---
title: "Scraping_Airline_Data_Outline"
author: "Augustus Ge"
date: "November 7, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# We are hoping to help Brown University students who are looking to go on a winter vacation but cannot decide where to go. This will scrape flight options data to 10 popular vacation destinations and allow the user to view all relevant options with variables destination, price, duration, stops, rating, arline, airline company reviews (Tripadvisor), departure time, and arrival time.

# Initial query for flight 

```{r}
library(rvest)
library(httr)
session <- html_session("https://www.expedia.com/")
query1 <- "Boston, MA (BOS-All Airports)"
query2 <- "New York, NY (JFK-John F. Kennedy Intl.)"
query3 <- "12/12/2018"
form <- html_form(session)[[1]]
filled_form <- set_values(form, query1, query2, query3)

session1 <- submit_form(session, filled_form)
```

```{r}

query = "data science"
loc = "Providence"
session <- html_session("https://www.indeed.com/jobs")
form <- html_form(session)[[1]]
filled_form <- set_values(form, q = query, l = loc)

session1 <- submit_form(session, filled_form)

```

```{r}
library(xml2)
library(rvest)

url_nyc <- "https://www.expedia.com/Flights-Search?flight-type=on&starDate=12%2F21%2F2018&mode=search&trip=oneway&leg1=from%3ABoston%2C+MA+%28BOS-Logan+Intl.%29%2Cto%3ANew+York%2C+NY+%28JFK-John+F.+Kennedy+Intl.%29%2Cdeparture%3A12%2F21%2F2018TANYT&passengers=children%3A0%2Cadults%3A1%2Cseniors%3A0%2Cinfantinlap%3AY&fareCalendarPrice=1819"
webpage_nyc <- read_html(url_nyc)

url_tyo <- "https://www.expedia.com/Flights-Search?flight-type=on&starDate=12%2F21%2F2018&mode=search&trip=oneway&leg1=from%3ABoston%2C+MA+%28BOS-Logan+Intl.%29%2Cto%3ATokyo%2C+Japan+%28HND-Haneda%29%2Cdeparture%3A12%2F21%2F2018TANYT&passengers=children%3A0%2Cadults%3A1%2Cseniors%3A0%2Cinfantinlap%3AY"
webpage_tyo <- read_html(url_tyo)

url_mex <- "https://www.expedia.com/Flights-Search?flight-type=on&starDate=12%2F21%2F2018&mode=search&trip=oneway&leg1=from%3ABoston%2C+MA+%28BOS-Logan+Intl.%29%2Cto%3AMexico+City%2C+Distrito+Federal%2C+Mexico+%28MEX-Mexico+City+Intl.%29%2Cdeparture%3A12%2F21%2F2018TANYT&passengers=children%3A0%2Cadults%3A1%2Cseniors%3A0%2Cinfantinlap%3AY"
webpage_mex <- read_html(url_mex)

url_nas <- "https://www.expedia.com/Flights-Search?flight-type=on&starDate=12%2F21%2F2018&mode=search&trip=oneway&leg1=from%3ABoston%2C+MA+%28BOS-Logan+Intl.%29%2Cto%3ANassau%2C+Bahamas+%28NAS-Nassau+Intl.%29%2Cdeparture%3A12%2F21%2F2018TANYT&passengers=children%3A0%2Cadults%3A1%2Cseniors%3A0%2Cinfantinlap%3AY"
webpage_nas <- read_html(url_nas)

url_bei <- "https://www.expedia.com/Flights-Search?flight-type=on&starDate=12%2F21%2F2018&mode=search&trip=oneway&leg1=from%3ABoston%2C+MA+%28BOS-Logan+Intl.%29%2Cto%3ABeijing%2C+China+%28PEK-Capital+Intl.%29%2Cdeparture%3A12%2F21%2F2018TANYT&passengers=children%3A0%2Cadults%3A1%2Cseniors%3A0%2Cinfantinlap%3AY"
webpage_bei <- read_html(url_bei)

url_par <- "https://www.expedia.com/Flights-Search?flight-type=on&starDate=12%2F21%2F2018&mode=search&trip=oneway&leg1=from%3ABoston%2C+MA+%28BOS-Logan+Intl.%29%2Cto%3AParis%2C+France+%28CDG-Roissy-Charles+de+Gaulle%29%2Cdeparture%3A12%2F21%2F2018TANYT&passengers=children%3A0%2Cadults%3A1%2Cseniors%3A0%2Cinfantinlap%3AY"
webpage_par <- read_html(url_par)

url_lon <- "https://www.expedia.com/Flights-Search?flight-type=on&starDate=12%2F21%2F2018&mode=search&trip=oneway&leg1=from%3ABoston%2C+MA+%28BOS-Logan+Intl.%29%2Cto%3ALondon%2C+England%2C+UK+%28LHR-Heathrow%29%2Cdeparture%3A12%2F21%2F2018TANYT&passengers=children%3A0%2Cadults%3A1%2Cseniors%3A0%2Cinfantinlap%3AY"
webpage_lon <- html(url_lon)

url_bcn <- "https://www.expedia.com/Flights-Search?flight-type=on&starDate=12%2F21%2F2018&mode=search&trip=oneway&leg1=from%3ABoston%2C+MA+%28BOS-Logan+Intl.%29%2Cto%3ABarcelona%2C+Spain+%28BCN-Barcelona+Intl.%29%2Cdeparture%3A12%2F21%2F2018TANYT&passengers=children%3A0%2Cadults%3A1%2Cseniors%3A0%2Cinfantinlap%3AY"
webpage_bcn <- read_html(url_bcn)

url_lax <- "https://www.expedia.com/Flights-Search?flight-type=on&starDate=12%2F21%2F2018&mode=search&trip=oneway&leg1=from%3ABoston%2C+MA+%28BOS-Logan+Intl.%29%2Cto%3ALos+Angeles%2C+CA+%28LAX-Los+Angeles+Intl.%29%2Cdeparture%3A12%2F21%2F2018TANYT&passengers=children%3A0%2Cadults%3A1%2Cseniors%3A0%2Cinfantinlap%3AY"
webpage_lax <- read_html(url_lax)

url_hkg <- "https://www.expedia.com/Flights-Search?flight-type=on&starDate=12%2F21%2F2018&mode=search&trip=oneway&leg1=from%3ABoston%2C+MA+%28BOS-Logan+Intl.%29%2Cto%3AHong+Kong%2C+Hong+Kong+SAR+%28HKG-Hong+Kong+Intl.%29%2Cdeparture%3A12%2F21%2F2018TANYT&passengers=children%3A0%2Cadults%3A1%2Cseniors%3A0%2Cinfantinlap%3AY"
webpage_hkg <- read_html(url_hkg)

```

```{r}
library(xml2)
library(rvest)
library(stringr)
url <- "https://www.imdb.com/search/title?count=100&release_date=2016,2016&title_type=feature"
webpage1 <- read_html(url)
# data <- dataframe(webpage)
# print(webpage)
rank_data <- html_text(html_nodes(webpage1, ".text-primary" ))
title_data<- html_text(html_nodes(webpage1, ".lister-item-header a" ))
description_data<-html_text(html_nodes(webpage1, ".ratings-bar+ .text-muted" ))
description_data<-gsub("\n","",description_data)
runtime_data<-  html_text(html_nodes(webpage1, ".runtime" ))
rating_data <- html_text(html_nodes(webpage1, ".ratings-imdb-rating strong" ))
rating_data<-as.numeric(rating_data)
director_data<-html_text(html_nodes(webpage1, ".lister-item-content a:nth-child(1)"))
metascore_data<-html_text(html_nodes(webpage1, ".metascore"))
metascore_data
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
```{r}
url<-"https://www.niche.com/colleges/stanford-university/"
webpage1 <- read_html(url)


name_data <- html_text(html_nodes(webpage1, ".postcard__title" ))
ACT_data <- html_text(html_nodes(webpage1, "#admissions .scalar--three:nth-child(2) .scalar__value span" ))

url_review <- str_c(url,"/reviews/")
webpage2<- read_html(url_review)
review_data <- html_text(html_nodes(webpage2, ".overflow-text__content div" ))
review_data

```

```{r}


get_data <- function(name){
  url1 <-"https://www.niche.com/colleges"
  url2 <- str_c(url1,"/",name,"/")
  webpages <- read_html(url2)
  name_data <- html_text(html_nodes(webpages, ".postcard__title" ))  
  ACT_data <- html_text(html_nodes(webpages, "#admissions .scalar--three:nth-child(2) .scalar__value span" ))
  url_review <- str_c(url2,"/reviews/")
  webpage2<- read_html(url_review)
  review_data <- html_text(html_nodes(webpage2, ".overflow-text__content div" ))
  print(name_data)
  print(ACT_data)
  print(review_data)
  
  
}



```

```{r}
get_data("brown-university") 



```

```{r}
name_data<-c()

url1 <-"https://www.niche.com/colleges"
  url2 <- str_c(url1,"/","brandeis-university","/")
  webpages <- read_html(url2)
  name_data1 <- html_text(html_nodes(webpages, ".postcard__title" ))  
  
  url3 <- str_c(url1,"/","brown-university","/")
  webpages1 <- read_html(url3)
  name_data2 <- html_text(html_nodes(webpages1, ".postcard__title" ))  
  
```


